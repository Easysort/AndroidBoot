<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>3 Phones CPU+Battery</title>
<script>
    const phones = [
  {id:"p1", url:"http://100.78.45.34:8787/metrics"},
  {id:"p2", url:"http://100.92.160.36:8787/metrics"},
  {id:"p3", url:"http://192.168.1.103:8787/metrics"}
];
async function poll(){
  for(const p of phones){
    try{
      let m = await (await fetch(p.url)).json();
      let b = m.battery||{};
      let charging = (b.plugged && b.plugged !== "UNPLUGGED") ? "Yes" : "No";
      document.getElementById(p.id).innerText =
        "CPU: "+(m.cpu_usage_pct?.toFixed?.(1) ?? "?")+"% | "+
        "Battery: "+(b.percentage ?? b.level ?? "?")+"% | "+
        "Charging: "+charging+" | "+
        "Temp: "+(b.temperature ?? "?")+"Â°C";
    }catch(e){ document.getElementById(p.id).innerText="offline"; }
  }
}
setInterval(poll,5000); poll();
</script>
</head>
<body style="font-family:sans-serif">
<h2>Phone Metrics</h2>
<div id="p1">Phone 1...</div>
<div id="p2">Phone 2...</div>
<div id="p3">Phone 3...</div>
</body>
</html>

